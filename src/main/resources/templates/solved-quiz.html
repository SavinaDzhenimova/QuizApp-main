<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec='http://www.thymeleaf.org/extras/spring-security'>

<head>
    <th:block th:replace="~{fragments/commons::head}"></th:block>
    <link rel="stylesheet" href="/css/solved-quiz-styles.css">
    <title>It's Quiz Time</title>
</head>

<body>

    <header th:replace="~{fragments/commons::header}"></header>

    <main>
      <div class="quiz-container">
        <div class="quiz-info">
            <h2 th:text="'Куиз в категория ' + ${solvedQuiz.categoryName}"></h2>

            <p>Резултат:
                <span th:text="${solvedQuiz.correctAnswers}"></span>/<span th:text="${solvedQuiz.totalQuestions}"></span>
            </p>
            <p>Решен на: <span th:text="${#temporals.format(solvedQuiz.solvedAt, 'dd.MM.yyyy г. HH:mm')}"></span></p>
        </div>

          <div class="question-pages">
              <div th:each="question, iter : ${solvedQuiz.questions}"
                   th:id="'q' + ${iter.index}"
                   class="question-page">
                  <h3 th:text="${question.questionText}" class="question-text"></h3>
                  <ul class="options-list">
                      <li th:each="option : ${question.options}"
                          class="answer-option"
                          th:classappend="${option == question.correctAnswer} ? 'correct' :
                          (${option == solvedQuiz.userAnswers[question.id]} ? 'wrong' : '')">
                          <span th:text="${option}"></span>
                      </li>
                  </ul>
              </div>
          </div>
        </div>

        <div class="pagination-buttons">
            <button type="button" id="prevBtn">⬅ Предишен</button>
            <button type="button" id="nextBtn">Следващ ➡</button>
            <a sec:authorize="isAuthenticated()" th:href="@{/users/quizzes}" class="btn-start">Обратно към всички</a>
        </div>
      </div>
    </main>

    <footer th:replace="~{fragments/commons::footer}"></footer>

    <script src="\js\pagination-effect.js"></script>
</body>
</html>